{"version":3,"sources":["components/Navbar.js","components/Landing.js","components/UserFunctions.js","components/Login.js","components/Register.js","components/Profile.js","components/ChannelItem.js","components/Channels.js","components/Message.js","components/Notification.js","components/Channel.js","components/ForgetPassword.js","components/ResetPassword.js","App.js","serviceWorker.js","index.js"],"names":["Navbar","state","expandNavbar","hasToggle","toggle","bind","this","setState","window","innerWidth","prevState","console","log","e","preventDefault","localStorage","removeItem","props","history","push","loginRegLink","className","to","onClick","userLink","logOut","type","data-toggle","data-target","aria-controls","aria-expanded","aria-label","id","usertoken","Component","withRouter","Landing","stripURL","content","matches","match","checkHasUsertoken","undefined","Login","email","password","onChange","onSubmit","name","target","value","checkEmail","length","document","getElementById","innerText","test","user","axios","post","then","response","status","setItem","data","error","login","res","noValidate","htmlFor","placeholder","Register","retype_password","checkInputs","checkName","checkPassword","checkRetypePassword","newUser","register","onBlur","Profile","oldName","oldEmail","newName","newEmail","edit_name_form_expanded","edit_email_form_expanded","expandOrShrink","clearInterval","interval","alert","setStateWithUsertoken","style","display","check","setInterval","checkHasUsertokenRepeatly","decoded","jwt_decode","req","updateNameReq","headers","updateEmail","button_id","substring","name_form_expanded","innerHTML","email_form_expanded","ChannelItem","parentNode","button","delete","channel_id","key","creator_is_me","Channels","index","deleleChannel","copyChannelItems","Object","assign","channelItems","splice","channelItemID","newChannelName","loadChannels","get","getAllChannels","channels","forEach","channel","createChannelReq","redirect_url","onMouseEnter","onMouseLeave","querySelector","map","channelItem","Message","last_polled_reply_id","replies","show_replies","unmountMe","displayThreads","div_message","segs","split","parent_message_id","getElementsByClassName","width","elements","removeChild","div_origin","cloneNode","div_origin_last_child","lastChild","setAttribute","appendChild","createElement","reply","div_reply","span_name","append","span_created_time","div_content","textContent","img_urls","message_image_wrapper","i","img","src","alt","getRepliesRepeatly","getRepliesReq","url","copyReplies","intext_image_urls","intext_images","sender_name","created_time","cnt_replies","Notification","scrollToUnread","num","Channel","channelID","channelName","isJustOpened","last_read_message_id","last_polled_message_id","unread_messages_num","new_message","new_reply","messages","Map","checkVisible","handleChildUnmount","pathSegs","location","pathname","getChannelNameReq","ChannelName","getMesssagesRepeatly","getMesssagesReq","copyMessages","copyMessagesLength","copy_last_read_message_id","copy_last_polled_message_id","server_side_last_read_message_id","max_last_read_message_id","Math","max","message","messages_div","scrollTop","last_read_message_div","offsetTop","offsetHeight","messages_children","childNodes","child","child_id","parseInt","isTopBetween","getBoundingClientRect","top","bottom","isBottomBetween","onScroll","is_reply","newMessage","ForgetPassword","resetPasswordReq","ResetPassword","urlParams","URLSearchParams","search","has","updatePasswordReq","token","App","exact","path","component","Boolean","hostname","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.675d2392.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport { Link, withRouter } from 'react-router-dom'\n\nclass Navbar extends Component {\n  constructor() {\n    super()\n    this.state = {\n      expandNavbar: false,\n      hasToggle: false,\n    }\n    this.toggle = this.toggle.bind(this)\n  }\n\n  componentDidMount() {\n    this.setState({expandNavbar: window.innerWidth > 768,\n                   hasToggle: window.innerWidth <= 768});\n  }\n\n  toggle() {\n    this.setState(prevState => {\n      console.log('toggle')\n      return {expandNavbar: !prevState.expandNavbar}\n    })\n  }\n\n  logOut(e) {\n    e.preventDefault()\n    this.toggle()\n    localStorage.removeItem('usertoken')\n    this.props.history.push(`/`)\n  }\n\n\n  render() {\n\n    const loginRegLink = (\n      <ul className=\"navbar-nav\">\n        <li className=\"nav-item\">\n          <Link to=\"/\" className=\"nav-link\" onClick={this.toggle}>\n            Home\n          </Link>\n        </li>\n        <li className=\"nav-item\">\n          <Link to=\"/login\" className=\"nav-link\" onClick={this.toggle}>\n            Login\n          </Link>\n        </li>\n        <li className=\"nav-item\">\n          <Link to=\"/register\" className=\"nav-link\" onClick={this.toggle}>\n            Register\n          </Link>\n        </li>\n      </ul>\n    )\n\n    const userLink = (\n      <ul className=\"navbar-nav\">\n        <li className=\"nav-item\">\n          <Link to=\"/\" className=\"nav-link\" onClick={this.toggle}>\n            Home\n          </Link>\n        </li>\n        <li className=\"nav-item\">\n          <Link to=\"/profile\" className=\"nav-link\" onClick={this.toggle}>\n            My Profile\n          </Link>\n        </li>\n        <li className=\"nav-item\">\n          <Link to=\"/channels\" className=\"nav-link\" onClick={this.toggle}>\n            Channels\n          </Link>\n        </li>\n        <li className=\"nav-item\">\n          <Link to=\"/\" onClick={this.logOut.bind(this)} className=\"nav-link\">\n            Logout\n          </Link>\n        </li>\n      </ul>\n    )\n\n    const toggle = (\n      <button\n        className=\"navbar-toggler\"\n        type=\"button\"\n        data-toggle=\"collapse\"\n        data-target=\"#navbars\"\n        aria-controls=\"navbars\"\n        aria-expanded=\"false\"\n        aria-label=\"Toggle navigation\"\n        onClick={this.toggle}>\n        <div className=\"navbar-toggler-lines\">\n          <div className=\"navbar-toggler-line\" />\n          <div className=\"navbar-toggler-line\" />\n          <div className=\"navbar-toggler-line\" />\n        </div>\n      </button>\n    )\n\n    return (\n      <nav\n        className=\"navbar-container\">\n\n\n        {this.state.hasToggle ? toggle : null}\n\n        <div\n          className={this.state.hasToggle\n                     ?  (this.state.expandNavbar ? \"navbar show\" : \"navbar collapse\" )\n                     : \"dummy\"}\n          id=\"navbars\"\n        >\n          {localStorage.usertoken ? userLink : loginRegLink}\n\n        </div>\n      </nav>\n    )\n  }\n}\n\nexport default withRouter(Navbar)\n","import React, { Component } from 'react'\n\nclass Landing extends Component {\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"welcome_page\">\n          <h1 className=\"container_header\">Welcome to Belay</h1>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Landing\n","import axios from 'axios'\n\n// -------------------------- User related ----------------------------------\n\nexport const register = newUser => {\n  return axios\n    .post('/api/register', {\n      name: newUser.name,\n      email: newUser.email,\n      password: newUser.password\n    })\n    .then((response) => {\n      if( response.status === 200 ) {\n        console.log('Registered successfully')\n        localStorage.setItem('usertoken', response.data['token'])\n      }\n      return response\n    }, (error) => {\n      console.log('POST /api/update_password failed. Details: ', error.response.data['error'])\n      return error.response\n    })\n}\n\nexport const login = user => {\n  return axios\n    .post('/api/login', {\n      email: user.email,\n      password: user.password\n    })\n    .then((response) => {\n      if( response.status === 200 ) {\n        console.log('Logged in successfully')\n        localStorage.setItem('usertoken', response.data['token'])\n      }\n      return response\n    }, (error) => {\n      console.log('POST /api/login failed. Details: ', error.response.data['error'])\n      return error.response\n    })\n}\n\nexport const sendResetPassword = req => {\n  return axios\n    .post('/api/forget_password', {\n      email: req.email,\n    })\n    .then((response) => {\n      if( response.status === 200 ) {\n        console.log('Sent reset password request successfully')\n      }\n      return response\n    }, (error) => {\n      console.log('POST /api/forget_password failed. Details: ', error.response.data['error'])\n      return error.response\n    })\n}\n\nexport const updatePassword = req => {\n  return axios\n    .post('/api/update_password', {\n      token: req.token,\n      password: req.password\n    },{\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n      }\n    })\n    .then((response) => {\n      if( response.status === 200 ) {\n        console.log('Reset password successfully')\n      }\n      return response\n    }, (error) => {\n      console.log('POST /api/update_password failed. Details: ', error.response.data['error'])\n      return error.response\n    })\n}\n\nexport const updateName = req => {\n  return axios\n    .post('/api/user', {\n      name: req.name\n    },{\n      headers: {\n        \"Authorization\" : \"Bearer \" + req.usertoken\n      }\n    })\n    .then((response) => {\n      if( response.status === 200 ) {\n        console.log('Updated username successfully')\n        localStorage.setItem('usertoken', response.data['token'])\n      }\n      return response\n    }, (error) => {\n      console.log('POST /api/user failed. Details: ', error.response.data['error'])\n      if(error.response.status === 401){\n        localStorage.removeItem('usertoken')\n      }\n      return error.response\n    })\n}\n\nexport const updateEmail = req => {\n  return axios\n    .post('/api/user', {\n      email: req.email\n    },{\n      headers: {\n        \"Authorization\" : \"Bearer \" + req.usertoken\n      }\n    })\n    .then((response) => {\n      if( response.status === 200 ) {\n        console.log('Updated email address successfully')\n        localStorage.setItem('usertoken', response.data['token'])\n      }\n      return response\n    }, (error) => {\n      console.log('POST /api/user failed. Details: ', error.response.data['error'])\n      if(error.response.status === 401){\n        localStorage.removeItem('usertoken')\n      }\n      return error.response\n    })\n}\n\n// -------------------------- Channel related ----------------------------------\n\nexport const getAllChannels = req => {\n  return axios\n  .get('/api/channels',\n    {headers: {\n        \"Authorization\" : \"Bearer \" + req.usertoken\n      }\n    }\n  )\n  .then((response) => {\n    if( response.status === 200 ) {\n      return response.data['channels'];\n    }\n  }, (error) => {\n    console.log('GET /api/channels failed. Details: ', error.response.data['error'])\n    if(error.response.status === 401){\n      localStorage.removeItem('usertoken')\n    }\n  })\n}\n\nexport const createChannel = req => {\n  return axios\n    .post('/api/create', {\n      name: req.name\n    },{\n      headers: {\n        \"Authorization\" : \"Bearer \" + req.usertoken\n      }\n    })\n    .then((response) => {\n      if( response.status === 200 ) {\n        console.log('Created channel successfully')\n      }\n      return response\n    }, (error) => {\n      console.log('POST /api/create failed. Details: ', error.response.data['error'])\n      if(error.response.status === 401){\n        localStorage.removeItem('usertoken')\n      }\n      return error.response\n    })\n}\n\nexport const deleteChannel = req => {\n  return axios\n    .post('/api/delete', {\n      channel_id: req.channel_id\n    },{\n      headers: {\n        \"Authorization\" : \"Bearer \" + req.usertoken\n      }\n    })\n    .then((response) => {\n      if( response.status === 200 ) {\n        console.log('Deleted channel successfully')\n        return response\n      }\n    }, (error) => {\n      console.log('POST /api/create failed. Details: ', error.response.data['error'])\n      return error.response\n    })\n}\n\nexport const getChannelName = req => {\n  return axios\n    .post('/api/channelName', {\n      channel_id: req.channel_id\n    },{\n      headers: {\n        \"Authorization\" : \"Bearer \" + req.usertoken\n      }\n    })\n    .then((response) => {\n      if( response.status === 200 ) {\n        console.log('Got channel name successfully')\n        return response.data['name']\n      }\n    }, (error) => {\n      console.log('POST /api/channelName failed. Details: ', error.response.data['error'])\n      if(error.response.status === 401){\n        localStorage.removeItem('usertoken')\n      }\n    })\n}\n\n// -------------------------- Message related ----------------------------------\n\nexport const stripURL = content => {\n  var urlRegex = /(https?:\\/\\/[^\\s]+.(jpg|jpeg|png|gif))/g;\n  var matches = content.match(urlRegex);\n  return matches==null?\"\":matches;\n}\n\nexport const getMessages = req => {\n  return axios\n  .get(req.url,\n    {headers: {\n        \"Authorization\" : \"Bearer \" + req.usertoken\n      }\n    }\n  )\n  .then((response) => {\n    if( response.status === 200 ) {\n      console.log('Polled messages successfully')\n      return response.data\n    }\n  }, (error) => {\n    console.log('GET ', req.url ,' failed. Details: ', error.response.data['error'])\n    if(error.response.status === 401){\n      localStorage.removeItem('usertoken')\n    }\n  })\n}\n\nexport const getReplies = req => {\n  return axios\n  .get(req.url,\n    {headers: {\n        \"Authorization\" : \"Bearer \" + req.usertoken\n      }\n    }\n  )\n  .then((response) => {\n    if( response.status === 200 ) {\n      console.log('Polled replies successfully')\n      return response.data['replies']\n    }\n  }, (error) => {\n    console.log('GET ', req.url ,' failed. Details: ', error.response.data['error'])\n  })\n}\n\nexport const post = newMessage => {\n  return axios\n    .post(newMessage.url, {\n      content: newMessage.content,\n      is_reply: newMessage.is_reply,\n      parent_message_id: newMessage.parent_message_id\n    },{\n      headers: {\n        \"Authorization\" : \"Bearer \" + newMessage.usertoken\n      }\n    })\n    .then((response) => {\n      if( response.status === 200 ) {\n        console.log('Posted successfully')\n      }\n    }, (error) => {\n      console.log('POST ', newMessage.url ,' failed. Details: ', error.response.data['error'])\n      if(error.response.status === 401){\n        localStorage.removeItem('usertoken')\n      }\n    })\n}\n\nexport const checkHasUsertoken = () => {\n  if(localStorage.usertoken===null||localStorage.usertoken===undefined){\n    return false\n  }\n  return true\n}\n","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport { login } from './UserFunctions'\n\nclass Login extends Component {\n  constructor() {\n    super()\n    this.state = {\n      email: '',\n      password: '',\n    }\n\n    this.onChange = this.onChange.bind(this)\n    this.onSubmit = this.onSubmit.bind(this)\n  }\n\n  onChange(e) {\n    let name = e.target.name\n    this.setState({ [name]: e.target.value }, () => {\n      if(name==='email') this.checkEmail();\n    });\n  }\n\n  checkEmail(){\n    if(this.state.email.length===0){\n      document.getElementById('email_validate_warning').innerText = 'Required'\n      return false\n    }else if (! /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.state.email)){\n      document.getElementById('email_validate_warning').innerText = 'Invalid email address'\n      return false\n    }else{\n      document.getElementById('email_validate_warning').innerText = ''\n      return true\n    }\n  }\n\n  onSubmit(e) {\n    e.preventDefault()\n\n    // check if inputs are correct\n    if(this.checkEmail()===false) return\n\n    // send login request\n    const user = {\n      email: this.state.email,\n      password: this.state.password\n    }\n\n    login(user).then(res => {\n      if(res.status===200){\n        const usertoken = localStorage.usertoken\n        console.log(\"Got a temporary token: \", usertoken)\n        this.props.history.push(`/profile`)\n      }else{\n        document.getElementById('login_failure_reason').innerText = res.data['error']\n      }\n    })\n  }\n\n  componentWillUnmount() {\n    //clear all inputs\n    this.setState({email: '',\n                   password: ''});\n  }\n\n  render() {\n    return (\n      <div className=\"content_container container\">\n        <form noValidate className=\"login_form\" onSubmit={this.onSubmit}>\n          <h1 className=\"login_form_header\">Please sign in</h1>\n          <div className=\"form-group\">\n            <label htmlFor=\"email\">Email address</label>\n            <input\n              type=\"email\"\n              className=\"form-control\"\n              name=\"email\"\n              placeholder=\"Enter email\"\n              value={this.state.email}\n              onChange={this.onChange}\n            />\n            <span id='email_validate_warning'></span>\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Password</label>\n            <input\n              type=\"password\"\n              className=\"form-control\"\n              name=\"password\"\n              placeholder=\"Password\"\n              value={this.state.password}\n              onChange={this.onChange}\n            />\n          </div>\n          <div className=\"form-group\">\n            <button type=\"submit\">Sign in</button>\n          </div>\n          <div className=\"form-group\">\n            <span id=\"login_failure_reason\"></span>\n          </div>\n          <div className=\"form-group\" id=\"links-form-group\">\n            <Link id=\"forget_password_link\" to=\"/forget_password\">Forgot Password?</Link>\n            <br />\n            <Link id=\"register_link\" to=\"/register\">Sign up</Link>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport default Login\n","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport { register } from './UserFunctions'\n\nclass Register extends Component {\n  constructor() {\n    super()\n    this.state = {\n      name: '',\n      email: '',\n      password: '',\n      retype_password: ''\n    }\n\n    this.onChange = this.onChange.bind(this)\n    this.onSubmit = this.onSubmit.bind(this)\n  }\n\n  onChange(e) {\n    let name = e.target.name\n    this.setState({ [name]: e.target.value }, () => {\n      this.checkInputs(name);\n    });\n  }\n\n  checkInputs(name){\n    switch(name){\n      case 'name':\n        this.checkName()\n        break\n      case 'email':\n        this.checkEmail()\n        break\n      case 'password':\n        this.checkPassword()\n        break\n      case 'retype_password':\n        this.checkRetypePassword();\n        break\n      default:\n      }\n  }\n\n  checkName(){\n    if(this.state.name.length < 2){\n      document.getElementById('name_validate_warning').innerText = 'Name length should be at least 2'\n      return false\n    }else{\n      document.getElementById('name_validate_warning').innerText = ''\n      return true\n    }\n  }\n\n  checkEmail(){\n    if(this.state.email.length===0){\n      document.getElementById('email_validate_warning').innerText = 'Required'\n      return false\n    }else if (! /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.state.email)){\n      document.getElementById('email_validate_warning').innerText = 'Invalid email address'\n      return false\n    }else{\n      document.getElementById('email_validate_warning').innerText = ''\n      return true\n    }\n  }\n\n  checkPassword(){\n    if(this.state.password.length===0){\n      document.getElementById('password_validate_warning').innerText = 'Required'\n      return false\n    }else if(! /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,100}$/.test(this.state.password)){\n      document.getElementById('password_validate_warning').innerText = 'Must be 8 characters or more, needs at least one numeric digit, one uppercase and one lowercase letter'\n      return false\n    }else{\n      document.getElementById('password_validate_warning').innerText = ''\n      return true\n    }\n  }\n\n  checkRetypePassword(){\n    if(this.state.password !== this.state.retype_password){\n      document.getElementById('retype_password_validate_warning').innerText = 'The passwords you entered do not match.'\n      return false\n    }else{\n      document.getElementById('retype_password_validate_warning').innerText = ''\n      return true\n    }\n  }\n\n  onSubmit(e) {\n    e.preventDefault()\n\n    // check if inputs are correct\n    let isInputsCorrect = this.checkName()&&this.checkEmail()&&this.checkPassword()&&this.checkRetypePassword()\n    if(isInputsCorrect === false) return\n\n    // send register request\n    const newUser = {\n      name: this.state.name,\n      email: this.state.email,\n      password: this.state.password\n    }\n\n    register(newUser).then(res => {\n      if(res.status===200){\n        const usertoken = localStorage.usertoken\n        console.log(\"Got a temporary token: \", usertoken)\n        this.props.history.push(`/profile`)\n      }else if(res.status===400){\n        document.getElementById('register_submit_warning').innerText = res.data['error']\n      }\n    })\n  }\n\n  componentWillUnmount() {\n    //clear all inputs\n    this.setState({name: '',\n                   email: '',\n                   password: '',\n                   retype_password: '' });\n  }\n\n  render() {\n    return (\n      <div className=\"content_container container\">\n        <form className=\"login_form\" onSubmit={this.onSubmit}>\n          <h1 className=\"login_form_header\">Please register</h1>\n          <div className=\"form-group\">\n            <label htmlFor=\"name\">Name</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              name=\"name\"\n              placeholder=\"Enter your name\"\n              value={this.state.name}\n              onChange={this.onChange}\n              onBlur={this.onChange}\n            />\n            <span id='name_validate_warning'></span>\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"email\">Email address</label>\n            <input\n              type=\"email\"\n              className=\"form-control\"\n              name=\"email\"\n              placeholder=\"Enter email\"\n              value={this.state.email}\n              onChange={this.onChange}\n            />\n            <span id='email_validate_warning'></span>\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Password</label>\n            <input\n              type=\"password\"\n              className=\"form-control\"\n              name=\"password\"\n              placeholder=\"Password\"\n              value={this.state.password}\n              onChange={this.onChange}\n            />\n            <span id='password_validate_warning'></span>\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Confirm password</label>\n            <input\n              type=\"password\"\n              className=\"form-control\"\n              name=\"retype_password\"\n              placeholder=\"Retype password\"\n              value={this.state.retype_password}\n              onChange={this.onChange}\n            />\n            <span id='retype_password_validate_warning'></span>\n          </div>\n          <div className=\"form-group\">\n            <button type=\"submit\">Register!</button>\n            <span id='register_submit_warning'></span>\n          </div>\n          <div className=\"form-group\">\n            <Link to=\"/login\">Already have an account?</Link>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport default Register\n","import React, { Component } from 'react'\nimport jwt_decode from 'jwt-decode'\nimport { updateName, updateEmail, checkHasUsertoken } from './UserFunctions'\n\nclass Profile extends Component {\n  constructor() {\n    super()\n    this.state = {\n      oldName: '',\n      oldEmail: '',\n      newName: '',\n      newEmail: '',\n      edit_name_form_expanded: false,\n      edit_email_form_expanded: false,\n    }\n    this.onChange = this.onChange.bind(this)\n    this.expandOrShrink = this.expandOrShrink.bind(this)\n    this.onSubmit = this.onSubmit.bind(this)\n  }\n\n  checkHasUsertokenRepeatly(){\n    if(!checkHasUsertoken()){\n      clearInterval(this.interval);\n      alert('Your usertoken has expired!')\n      this.props.history.push(`/`)\n    }\n  }\n\n  componentDidMount() {\n    this.setStateWithUsertoken()\n    document.getElementById('edit_name_form').style.display = 'none'\n    document.getElementById('edit_email_form').style.display = 'none'\n    this.check = setInterval(() => this.checkHasUsertokenRepeatly(), 500);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.check);\n    //clear all inputs\n    this.setState({oldName: '',\n                   oldEmail: '',\n                   newName: '',\n                   newEmail: '',\n                   edit_name_form_expanded: false,\n                   edit_email_form_expanded: false});\n  }\n\n  setStateWithUsertoken(){\n    const decoded = jwt_decode(localStorage.usertoken)\n    this.setState({\n      oldName: decoded.name,\n      oldEmail: decoded.email\n    })\n  }\n\n  onChange(e) {\n    let name = e.target.name\n    this.setState({ [name]: e.target.value }, () => {\n      if(name==='newName'){\n        this.checkName();\n      }else if(name==='newEmail'){\n        this.checkEmail();\n      }\n    });\n  }\n\n  checkName(){\n    if(this.state.newName === this.state.oldName){\n      document.getElementById('name_validate_warning').innerText = 'New name cannot be the same as the old one'\n    }else if(this.state.newName.length<2){\n      document.getElementById('name_validate_warning').innerText = 'Username must be longer than 1'\n    }else{\n      document.getElementById('name_validate_warning').innerText = ''\n      return true\n    }\n    return false\n  }\n\n  checkEmail(){\n    if(this.state.newEmail.length===0){\n      document.getElementById('email_validate_warning').innerText = 'Required'\n    }else if(this.state.newEmail === this.state.oldEmail){\n      document.getElementById('email_validate_warning').innerText = 'New email cannot be the same as the old one'\n    }else if (! /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.state.newEmail)){\n      document.getElementById('email_validate_warning').innerText = 'Invalid email address'\n    }else{\n      document.getElementById('email_validate_warning').innerText = ''\n      return true\n    }\n    return false\n  }\n\n  onSubmit(e) {\n    e.preventDefault()\n\n    let name = e.target.id\n    switch (name) {\n      case 'edit_name_form':\n        if(!this.checkName()) return;\n\n        const updateNameReq = {\n          name: this.state.newName,\n          usertoken: localStorage.usertoken\n        }\n\n        updateName(updateNameReq).then(res => {\n          if(res.status===200){\n            this.setStateWithUsertoken()\n            this.setState({edit_name_form_expanded: false})\n          }else{\n            document.getElementById('update_name_warning').innerText = res.data['error']\n          }\n        })\n\n        break\n\n      case 'edit_email_form':\n        if(!this.checkEmail()) return;\n\n        const updateEmailReq = {\n          email: this.state.newEmail,\n          usertoken: localStorage.usertoken\n        }\n\n        updateEmail(updateEmailReq).then(res => {\n          if(res.status===200){\n            this.setStateWithUsertoken()\n            this.setState({edit_email_form_expanded: false})\n          }else{\n            document.getElementById('update_email_warning').innerText = res.data['error']\n          }\n        })\n\n        break\n\n      default:\n    }\n  }\n\n  expandOrShrink(e){\n    let button_id = e.target.id\n    let form_id = button_id.substring(0, button_id.length-7)\n    switch(form_id){\n      case 'edit_name_form':\n        let name_form_expanded = this.state.edit_name_form_expanded\n        document.getElementById('edit_name_form').style.display = name_form_expanded?'none':'block'\n        document.getElementById('edit_name_form_button').innerHTML = name_form_expanded?'+':'-'\n        this.setState({edit_name_form_expanded: !name_form_expanded})\n        break;\n      case 'edit_email_form':\n        let email_form_expanded = this.state.edit_email_form_expanded\n        document.getElementById('edit_email_form').style.display = email_form_expanded?'none':'block'\n        document.getElementById('edit_email_form_button').innerHTML = email_form_expanded?'+':'-'\n        this.setState({edit_email_form_expanded: !email_form_expanded})\n        break;\n      default:\n    }\n  }\n\n  render() {\n    return (\n      <div className='container'>\n        <div className='container_header'>\n          <h1 className='text-center'>Profile</h1>\n        </div>\n\n        <div className='container_body_wrapper'>\n          <div className='container_body'>\n            <hr />\n\n            <div className='profile_row'>\n              <div className='profile_name'>Name</div>\n              <div className='profile_name_value'>{this.state.oldName}</div>\n              <div className='profile_button' id='edit_name_form_button' onClick={this.expandOrShrink}>+</div>\n            </div>\n\n            <form className='edit_profile_form' id='edit_name_form' onSubmit={this.onSubmit}>\n              <div className=\"form-group\">\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  name=\"newName\"\n                  value={this.state.newName}\n                  placeholder=\"New name\"\n                  onChange={this.onChange}\n                />\n                <span id='name_validate_warning'></span>\n              </div>\n              <div className=\"form-group\">\n                <button type='submit'>Update Name</button>\n                <span id='update_name_warning'></span>\n              </div>\n            </form>\n\n            <hr />\n\n            <div className='profile_row'>\n              <div className='profile_name'>Email</div>\n              <div className='profile_name_value'>{this.state.oldEmail}</div>\n              <div className='profile_button' id='edit_email_form_button' onClick={this.expandOrShrink}>+</div>\n            </div>\n\n            <form className='edit_profile_form' id='edit_email_form' onSubmit={this.onSubmit}>\n              <div className=\"form-group\">\n                <input\n                  type=\"email\"\n                  className=\"form-control\"\n                  name=\"newEmail\"\n                  value={this.state.newEmail}\n                  placeholder=\"New email address\"\n                  onChange={this.onChange}\n                />\n                <span id='email_validate_warning'></span>\n              </div>\n              <div className=\"form-group\">\n                <button type='submit'>Update Email</button>\n                <span id='update_email_warning'></span>\n              </div>\n            </form>\n\n            <hr />\n\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Profile\n","import React, { Component } from 'react'\nimport { withRouter } from 'react-router-dom'\n\nclass ChannelItem extends Component {\n\n\tonClick(e) {\n\t\tthis.props.history.push(\"/channel/\" + e.target.parentNode.id)\n\t}\n\n\trender() {\n\n\t\tlet button = (\n\t\t\t\t<button\n\t\t\t\t\tclassName='delete_channel_item_button'\n\t\t\t\t\tonClick={this.props.delete}>\n\t\t\t\tDelete\n\t\t\t\t</button>\n\t\t\t)\n\n\t\treturn (\n\t\t\t<div className='channel' id={this.props.channel_id} key={this.props.key}>\n\t\t\t\t<span className='channel_name' onClick={this.onClick.bind(this)}>{this.props.name}</span>\n\t\t\t\t{this.props.creator_is_me==='True' ? button : null}\n\t\t\t</div>\n\t\t    )\n\t\t}\n}\n\nexport default withRouter(ChannelItem)\n","import React, { Component } from 'react'\nimport { getAllChannels, createChannel, deleteChannel, checkHasUsertoken } from './UserFunctions'\nimport ChannelItem from './ChannelItem'\n\n\nclass Channels extends Component {\n  constructor() {\n    super()\n    this.channelItemID=0\n    this.state = {\n      newChannelName: '',\n      channelItems: [],\n    }\n    this.onSubmit = this.onSubmit.bind(this)\n    this.onChange = this.onChange.bind(this)\n  }\n\n  componentDidMount() {\n    this.loadChannels()\n\n    // Starts checking usertoken\n    this.check = setInterval(() => this.checkHasUsertokenRepeatly(), 500);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.check);\n  }\n\n  checkHasUsertokenRepeatly(){\n    if(!checkHasUsertoken()){\n      clearInterval(this.interval);\n      alert('Your usertoken has expired!')\n      this.props.history.push(`/`)\n    }\n  }\n\n  loadChannels(){\n    if (localStorage.usertoken===null || localStorage.usertoken===undefined) {\n      alert('Your token has expired')\n      this.props.history.push(`/`)\n      return\n    }\n\n    //request all channels\n    const req = {\n        usertoken: localStorage.usertoken\n    }\n\n    const channelItems = []\n\n    getAllChannels(req).then(channels => {\n      if(channels===null || channels===undefined || channels.length===0) {\n        return\n      }\n\n      channels.forEach(channel => {\n        this.channelItemID = this.channelItemID + 1\n        channel['id'] = this.channelItemID\n        channel['key'] = this.channelItemID //keep every key is unique\n        channelItems.push(channel)\n      })\n\n      this.setState({channelItems: channelItems})\n    });\n  }\n\n  delete = (channel_id, index) => {\n    const deleleChannel = {\n      channel_id: channel_id,\n      usertoken: localStorage.usertoken\n    }\n\n    deleteChannel(deleleChannel).then(res => {\n      if(res.status){\n        const copyChannelItems = Object.assign([], this.state.channelItems)\n        copyChannelItems.splice(index, 1)\n        this.setState({channelItems:  copyChannelItems})\n      }\n    })\n  }\n\n  onChange(e) {\n    this.setState({ [e.target.name]: e.target.value }, () => {\n      this.checkName();\n    })\n  }\n\n  checkName(){\n    console.log(/^[a-zA-Z0-9-_]+$/.test(this.state.newChannelName))\n    if(this.state.newChannelName.length === 0){\n      document.getElementById('name_validate_warning').innerText = 'Required'\n      return false\n    }else if (/^[a-zA-Z0-9-_]+$/.test(this.state.newChannelName)){\n      document.getElementById('name_validate_warning').innerText = ''\n      return true\n    }else{\n      document.getElementById('name_validate_warning').innerText = 'The name should only consist of numbers, letters, and underscores (and no spaces)'\n      return false\n    }\n  }\n\n  onSubmit(e){\n    e.preventDefault()\n\n    if(!this.checkName()) return\n\n    const createChannelReq = {\n      usertoken: localStorage.usertoken,\n      name: this.state.newChannelName,\n    }\n\n    createChannel(createChannelReq).then(res => {\n      if(res.status===200) {\n        let channel_id = res.data['id']\n        let redirect_url = `/channel/`+channel_id\n        alert(\"Create Successfully\")\n        this.props.history.push(redirect_url)\n      }else{\n        document.getElementById('create_channel_warning').innerHTML = res.data['error']\n      }\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className='container_header'>\n          <h1 className='text-center'>Channels</h1>\n          <div\n            id='create_channel_div'\n            onMouseEnter={() => document.getElementById(\"create_channel_span\").style.display = 'block'}\n            onMouseLeave={() => document.getElementById(\"create_channel_span\").style.display = 'none'}\n            onClick={() => document.querySelector('.pop_up_wrapper').style.display = 'block'}\n          >\n            +\n          </div>\n          <span id='create_channel_span'>Click to create channel</span>\n        </div>\n\n        <div className='container_body_wrapper'>\n        \n          <div className='container_body'>\n            <div className=\"pop_up_wrapper\">\n              <form noValidate className=\"login_form\" onSubmit={this.onSubmit}>\n                <div\n                  className=\"close\"\n                  onClick={() => document.querySelector('.pop_up_wrapper').style.display = 'none'}\n                >\n                x\n                </div>\n                <h1 className=\"login_form_header\">Create a new channel</h1>\n                <div className=\"form-group\">\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    name=\"newChannelName\"\n                    placeholder=\"New channel name\"\n                    value={this.state.password}\n                    onChange={this.onChange}\n                  />\n                  <span id='name_validate_warning'></span>\n                </div>\n                <div className=\"form-group\">\n                  <button type=\"submit\">Create</button>\n                </div>\n                <div className=\"form-group\">\n                  <span id=\"create_channel_warning\"></span>\n                </div>\n              </form>\n            </div>\n\n            <div className=\"channels\">\n              <hr />\n              {\n                this.state.channelItems.map((channelItem, index) => {\n                  return (\n                    <div key={channelItem.key}>\n                      <ChannelItem\n                       channel_id={channelItem.channel_id}\n                       name={channelItem.name}\n                       creator_is_me={channelItem.creator_is_me}\n                       delete={this.delete.bind(this, channelItem.channel_id, index)}\n                      />\n                      <hr />\n                    </div>\n                  )\n                })\n              }\n            </div>\n\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Channels\n","import React, { Component } from \"react\";\nimport { getReplies, stripURL, checkHasUsertoken } from \"./UserFunctions\";\n\nclass Message extends Component {\n  constructor() {\n    super();\n    this.state = {\n      id: \"\",\n      last_polled_reply_id: 0,\n      replies: [],\n      show_replies: false\n    };\n  }\n\n  dismiss() {\n    this.props.unmountMe();\n  }\n\n  checkHasUsertokenRepeatly(){\n    if(!checkHasUsertoken()){\n      clearInterval(this.interval);\n      alert('Your usertoken has expired!')\n      this.props.history.push(`/`)\n    }\n  }\n\n  componentDidMount() {\n    this.setState({ id: \"message_id_\" + this.props.id });\n\n    this.check = setInterval(() => this.checkHasUsertokenRepeatly(), 500);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.check)\n    if(this.interval===null || this.interval===undefined) return\n    clearInterval(this.interval)\n  }\n\n  onClick(e) {\n    this.displayThreads(e.target.parentNode);\n  }\n\n  displayThreads(div_message) {\n    this.setState({show_replies: true})\n\n    // Gets parent_message_id\n    var segs = div_message.id.split(\"_\");\n    var parent_message_id = segs[segs.length - 1];\n    console.log(parent_message_id);\n\n    // Displays threads\n    if(window.innerWidth <= 768){\n      document.getElementById(\"new_message_notification\").style.display = \"none\";\n      document.getElementsByClassName(\"messages_container\")[0].style.width = \"0%\";\n      document.getElementsByClassName(\"replies_container\")[0].style.width = \"100%\";\n      document.getElementsByClassName(\"replies_container\")[0].style.display = \"block\";\n    }else{\n      document.getElementsByClassName(\"messages_container\")[0].style.width = \"60%\";\n      document.getElementsByClassName(\"replies_container\")[0].style.width = \"40%\";\n      document.getElementsByClassName(\"replies_container\")[0].style.display = \"block\";\n    }\n    \n\n    let classNames = [\"reply\", \"replies_counts_separator\"];\n    classNames.forEach(function(className) {\n      var elements = document.getElementsByClassName(className);\n      while (elements.length > 0) {\n        elements[0].parentNode.removeChild(elements[0]);\n      }\n    });\n\n    // Copies origin node\n    let div_origin = div_message.cloneNode(true);\n    let div_origin_last_child = div_origin.lastChild;\n    div_origin.removeChild(div_origin_last_child);\n    div_origin.setAttribute(\"class\", \"reply\");\n\t\tdiv_origin.appendChild(document.createElement(\"hr\"));\n    document.getElementById(\"origin_message\").appendChild(div_origin);\n\n\n    //display old replies\n    let replies = this.state.replies\n    replies.forEach(reply => {\n      let div_reply = document.createElement(\"div\");\n      div_reply.id = \"reply_id_\" + reply[\"id\"];\n      div_reply.className = \"reply\";\n\n      let span_name = document.createElement(\"span\");\n      span_name.className = \"sender_name\";\n      span_name.innerHTML = reply[\"sender_name\"];\n      div_reply.append(span_name);\n\n      let span_created_time = document.createElement(\"span\");\n      span_created_time.className = \"created_time\";\n      span_created_time.innerHTML = reply[\"created_time\"];\n      div_reply.append(span_created_time);\n\n      let div_content = document.createElement(\"div\");\n      div_content.className = \"content\";\n      div_content.textContent = reply[\"content\"];\n      div_reply.append(div_content);\n\n      let img_urls = stripURL(reply[\"content\"]);\n      if(img_urls.length>0){\n        let message_image_wrapper = document.createElement(\"div\");\n        message_image_wrapper.className = 'message_image_wrapper'\n        for(var i=0;i<img_urls.length;i++){\n          let img = document.createElement(\"img\");\n          img.src = img_urls[i];\n          img.alt = img_urls[i];\n          message_image_wrapper.append(img);\n        }\n        div_reply.append(message_image_wrapper);\n      }\n\n      document.getElementById(\"other_replies\").appendChild(div_reply);\n    });\n\n    if(this.interval!==null && this.interval!==undefined) clearInterval(this.interval)\n    this.interval = setInterval(\n      () => this.getRepliesRepeatly(parent_message_id),\n      1000\n    );\n\n  }\n\n  getRepliesRepeatly(parent_message_id) {\n    const last_polled_reply_id = this.state.last_polled_reply_id;\n    const getRepliesReq = {\n      url:\n        \"/api/replies/\" +\n        parent_message_id +\n        \"?last_polled_reply_id=\" +\n        last_polled_reply_id,\n      usertoken: localStorage.usertoken\n    };\n\n    const copyReplies = Object.assign([], this.state.replies);\n\n    getReplies(getRepliesReq).then(replies => {\n      if (replies === null || replies === undefined || replies.length === 0) return;\n\n      replies.forEach(reply => {\n        copyReplies.push(reply);\n\n        let div_reply = document.createElement(\"div\");\n        div_reply.id = \"reply_id_\" + reply[\"id\"];\n        div_reply.className = \"reply\";\n\n        let span_name = document.createElement(\"span\");\n        span_name.className = \"sender_name\";\n        span_name.innerHTML = reply[\"sender_name\"];\n        div_reply.append(span_name);\n\n        let span_created_time = document.createElement(\"span\");\n        span_created_time.className = \"created_time\";\n        span_created_time.innerHTML = reply[\"created_time\"];\n        div_reply.append(span_created_time);\n\n        let div_content = document.createElement(\"div\");\n        div_content.className = \"content\";\n        div_content.textContent = reply[\"content\"];\n        div_reply.append(div_content);\n\n\t\t\t\tlet img_urls = stripURL(reply[\"content\"]);\n\t\t\t\tif(img_urls.length>0){\n\t\t\t\t\tlet message_image_wrapper = document.createElement(\"div\");\n\t\t\t\t\tmessage_image_wrapper.className = 'message_image_wrapper'\n\t\t\t\t\tfor(var i=0;i<img_urls.length;i++){\n\t\t\t\t\t\tlet img = document.createElement(\"img\");\n\t\t\t\t\t\timg.src = img_urls[i];\n\t\t\t\t\t\timg.alt = img_urls[i];\n\t\t\t\t\t\tmessage_image_wrapper.append(img);\n\t\t\t\t\t}\n\t\t\t\t\tdiv_reply.append(message_image_wrapper);\n\t\t\t\t}\n\n        document.getElementById(\"other_replies\").appendChild(div_reply);\n      });\n\n      this.setState({\n        last_polled_reply_id: replies[replies.length - 1][\"id\"],\n        replies: copyReplies\n      });\n\n    });\n  }\n\n  render() {\n    let intext_image_urls = stripURL(this.props.content);\n    if (intext_image_urls && intext_image_urls.length>0) {\n      var intext_images = intext_image_urls.map((url, index) => {\n        return (\n          <div className=\"message_image_wrapper\" key={index}>\n            <img src={`${url}`} alt={`${url}`} />\n          </div>\n        );\n      });\n    }\n\n    return (\n      <div className=\"message\" id={this.state.id} key={this.state.id}>\n        <span className=\"sender_name\">\n          {this.props.sender_name}\n        </span>\n        <span className=\"created_time\">{this.props.created_time}</span>\n        <div className=\"content\">{this.props.content}</div>\n        {intext_images ? intext_images : null}\n        <div className=\"reply_counts\" onClick={this.onClick.bind(this)}>\n          {this.props.cnt_replies > 0\n            ? this.props.cnt_replies + \" replies\"\n            : \"Reply\"}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Message;\n","import React, { Component } from 'react'\nimport { withRouter } from 'react-router-dom'\n\nclass Notification extends Component {\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"notification\" onClick={this.props.scrollToUnread}>\n\t\t\t\t<span className=\"unread_messages\">{this.props.num} unread messages</span>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default withRouter(Notification)\n","import React, { Component } from \"react\";\nimport { getMessages, post, getChannelName, checkHasUsertoken } from \"./UserFunctions\";\nimport Message from \"./Message\";\nimport Notification from \"./Notification\";\n\nclass Channel extends Component {\n  constructor() {\n    super();\n    this.state = {\n      url: \"\",\n      channelID: 0,\n      channelName: \"\",\n      isJustOpened: true,\n      // to dynamically track read and polled messages\n      last_read_message_id: 0,\n      last_polled_message_id: 0,\n      unread_messages_num: 0,\n      // to post new messages\n      new_message: \"\",\n      new_reply: \"\",\n      // to display messages\n      messages: [],\n    };\n\n    this.map = new Map([\n      [\"new_message_form\", \"new_message\"],\n      [\"new_reply_form\", \"new_reply\"]\n    ]);\n\n    this.onChange = this.onChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.checkVisible = this.checkVisible.bind(this);\n    this.handleChildUnmount = this.handleChildUnmount.bind(this);\n  }\n\n  checkHasUsertokenRepeatly(){\n    if(!checkHasUsertoken()){\n      clearInterval(this.interval);\n      alert('Your usertoken has expired!')\n      this.props.history.push(`/`)\n    }\n  }\n\n  componentDidMount() {\n    document.getElementsByClassName('replies_container')[0].style.display = 'none'\n\n    // Gets channelID\n    var relativePath = this.props.location.pathname;\n    var pathSegs = relativePath.split(\"/\");\n    var channelID = pathSegs[pathSegs.length - 1];\n    this.setState({\n      url: this.props.location,\n      channelID: channelID\n    });\n\n    // Gets ChannelName\n    const getChannelNameReq = {\n      channel_id: channelID,\n      usertoken: localStorage.usertoken\n    };\n\n    getChannelName(getChannelNameReq).then(ChannelName => {\n      if (ChannelName === null || ChannelName === undefined) return;\n      this.setState({ channelName: ChannelName });\n      document.getElementById(\"channel_name\").innerHTML = \"#\" + ChannelName;\n    });\n\n    // Starts checking usertoken\n    this.check = setInterval(() => this.checkHasUsertokenRepeatly(), 500);\n\n    // Starts polling messages\n    this.interval = setInterval(() => this.getMesssagesRepeatly(), 500);\n  }\n\n  componentWillUnmount() {\n    this.setState({ messages: [],})\n    clearInterval(this.interval);\n    clearInterval(this.check);\n  }\n\n  handleChildUnmount(){\n    this.setState({ messages: [],})\n  }\n\n  getMesssagesRepeatly() {\n    const getMesssagesReq = {\n      url:\n        \"/api/messages/\" +\n        this.state.channelID +\n        \"?last_read_message_id=\" +\n        this.state.last_read_message_id,\n      usertoken: localStorage.usertoken\n    };\n\n    const copyMessages = Object.assign([], this.state.messages);\n    const copyMessagesLength = copyMessages.length;\n    var unread_messages_num = this.state.unread_messages_num;\n    const copy_last_read_message_id = this.state.last_read_message_id;\n    const copy_last_polled_message_id = this.state.last_polled_message_id;\n\n    getMessages(getMesssagesReq).then(res => {\n      if (res === null || res === undefined) return;\n      let messages = res['messages']\n      let server_side_last_read_message_id = res['server_side_last_read_message_id']\n      let max_last_read_message_id = Math.max(copy_last_read_message_id, server_side_last_read_message_id)\n\n      messages.forEach((message, index) => {\n        console.log('max_last_read_message_id:', max_last_read_message_id)\n        console.log('message.id:', message.id)\n        if (message.id > max_last_read_message_id && message.id > copy_last_polled_message_id) {\n          unread_messages_num = unread_messages_num + 1;\n        } \n        if (index >= copyMessagesLength){\n          copyMessages.push(message);\n        }else{\n          copyMessages[index]['cnt_replies'] = message['cnt_replies'];\n        }\n      });\n\n      this.setState({\n        messages: copyMessages,\n        unread_messages_num: unread_messages_num,\n        last_read_message_id: max_last_read_message_id,\n      });\n\n      if(messages!==null&&messages.length>0){\n        this.setState({\n          last_polled_message_id: messages[messages.length - 1][\"id\"]\n        });  \n      }\n\n      if(this.state.isJustOpened){\n        let last_read_message_id = max_last_read_message_id\n        let messages_div = document.getElementById(\"messages\");\n        if (last_read_message_id === 0) {\n          messages_div.scrollTop = 0;   \n        } else {\n          let last_read_message_div = document.getElementById(\n            \"message_id_\" + last_read_message_id\n          );\n          messages_div.scrollTop = \n            last_read_message_div.offsetTop + last_read_message_div.offsetHeight - messages_div.offsetHeight;\n        }\n        this.setState({isJustOpened: false})\n      }\n    });\n  }\n\n  scrollToUnread() {\n    let last_read_message_id = this.state.last_read_message_id\n    let messages_div = document.getElementById(\"messages\");\n    if (last_read_message_id === 0) {\n      messages_div.scrollTop = 0;   \n    } else {\n      let last_read_message_div = document.getElementById(\n        \"message_id_\" + last_read_message_id\n      );\n      messages_div.scrollTop =\n        last_read_message_div.offsetTop + last_read_message_div.offsetHeight;\n    }\n    this.checkVisible();\n  }\n\n  checkVisible() {\n    let messages_div = document.getElementById(\"messages\");\n    let messages_children = messages_div.childNodes;\n\n    var last_read_message_id = this.state.last_read_message_id;\n    var unread_messages_num = this.state.unread_messages_num;\n\n    for (var i = 0; i < messages_children.length; i++) {\n      let child = messages_children[i];\n      let segs = child.id.split(\"_\");\n      var child_id = parseInt(segs[segs.length - 1]);\n\n      if (child_id <= last_read_message_id) continue;\n\n      let isTopBetween =\n        child.getBoundingClientRect().top >=\n          messages_div.getBoundingClientRect().top &&\n        child.getBoundingClientRect().top <=\n          messages_div.getBoundingClientRect().bottom;\n      let isBottomBetween =\n        child.getBoundingClientRect().bottom >=\n          messages_div.getBoundingClientRect().top &&\n        child.getBoundingClientRect().top <=\n          messages_div.getBoundingClientRect().bottom;\n      if (isTopBetween || isBottomBetween) {\n        unread_messages_num -= 1;\n        last_read_message_id = child_id;\n      }\n    }\n\n    this.setState({ last_read_message_id: last_read_message_id });\n    this.setState({ unread_messages_num: unread_messages_num });\n  }\n\n  render() {\n\n    console.log('unread_messages_num:', this.state.unread_messages_num)\n\n    return (\n      <div className=\"container\" id=\"channel_page_container\">\n        <div className=\"container_header\">\n          <h1 className=\"text-center\" id=\"channel_name\">Channel</h1>\n        </div>\n\n        <div className=\"container_body_wrapper\">\n\n          <div className=\"messages_container\">\n            <div id=\"new_message_notification\">\n              {this.state.unread_messages_num > 0 ? (\n                <Notification\n                  num={this.state.unread_messages_num}\n                  scrollToUnread={this.scrollToUnread.bind(this)}\n                />\n              ) : null}\n            </div>\n\n            <div id=\"messages\" onScroll={this.checkVisible}>\n              {this.state.messages.length > 0 \n                ? this.state.messages.map((message, index) => {\n                    return (\n                        <Message\n                          key={message.id}\n                          id={message.id}\n                          sender_name={message.sender_name}\n                          created_time={message.created_time}\n                          content={message.content}\n                          cnt_replies={message.cnt_replies}\n                          unmountMe={this.handleChildUnmount}\n                        />\n                    );\n                  })\n                : null\n              }\n            </div>\n\n            <div id=\"message_input\">\n              <form name=\"new_message_form\" onSubmit={this.onSubmit}>\n                <textarea\n                  name=\"new_message\"\n                  id=\"new_message_textarea\"\n                  onChange={this.onChange}>\n                </textarea>\n                <button type=\"submit\">Submit</button>\n              </form>\n            </div>\n\n          </div>\n\n          <div className=\"replies_container\">\n            <span\n              id=\"close\"\n              onClick={() => {\n                document.getElementsByClassName(\"replies_container\")[0].style.display = \"none\";\n                document.getElementsByClassName(\"messages_container\")[0].style.width = \"100%\";\n                document.getElementById(\"new_message_notification\").style.display = \"block\";}}>\n              x\n            </span>\n            <div className=\"container_header\" id=\"header\">\n              Thread\n            </div>\n            <div className=\"replies\">\n              <div id=\"origin_message\"></div>\n              <div id=\"other_replies\"></div>\n            </div>\n            <div id=\"reply_input\">\n              <form name=\"new_reply_form\" onSubmit={this.onSubmit}>\n                <textarea name=\"new_reply\" id=\"new_reply_textarea\" onChange={this.onChange}></textarea>\n                <button type=\"submit\">Submit</button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  onChange(e) {\n    this.setState({ [e.target.name]: e.target.value });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n\n    let item_name = this.map.get(e.target.name);\n\n    const is_reply = (item_name===\"new_reply\");\n    if(is_reply && this.state.new_reply.length===0){\n      return;\n    }else if(!is_reply && this.state.new_message.length===0){\n      return\n    }\n\n    if(is_reply){\n      let parentNode = document.getElementById(\"origin_message\").childNodes[0]\n      var segs = parentNode.id.split(\"_\");\n      var parent_message_id = parseInt(segs[segs.length - 1]);\n      console.log(parent_message_id);\n    }\n\n    const newMessage = {\n      url: \"/api/post/\" + this.state.channelID,\n      usertoken: localStorage.usertoken,\n      content: is_reply ? this.state.new_reply : this.state.new_message,\n      is_reply: is_reply,\n      parent_message_id: is_reply ? parent_message_id : -1\n    };\n\n    post(newMessage)\n\n    if(is_reply){\n      document.getElementById('new_reply_textarea').value = ''\n      this.setState({ new_reply: ''})\n    }else{\n      document.getElementById('new_message_textarea').value = ''\n      this.setState({ new_message: ''})\n    }\n  }\n}\n\nexport default Channel;\n","import React, { Component } from 'react'\nimport { sendResetPassword } from './UserFunctions'\n\nclass ForgetPassword extends Component {\n  constructor() {\n    super()\n    this.state = {\n      email: '',\n    }\n\n    this.onChange = this.onChange.bind(this)\n    this.onSubmit = this.onSubmit.bind(this)\n  }\n\n  onChange(e) {\n    let name = e.target.name\n    this.setState({ [name]: e.target.value }, () => {\n      this.checkEmail();\n    });\n  }\n\n  checkEmail(){\n    if(this.state.email.length===0){\n      document.getElementById('email_validate_warning').innerText = 'Required'\n      return false\n    }else if (! /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.state.email)){\n      document.getElementById('email_validate_warning').innerText = 'Invalid email address'\n      return false\n    }else{\n      document.getElementById('email_validate_warning').innerText = ''\n      return true\n    }\n  }\n\n  onSubmit(e) {\n    e.preventDefault()\n\n    //check if the inputs are correct\n    if(!this.checkEmail()) return\n\n    //sends request to reset password\n    const resetPasswordReq = {\n      email: this.state.email\n    }\n\n    sendResetPassword(resetPasswordReq).then(res => {\n      if(res.status===200){\n        document.getElementById('login_failure_reason').innerText = 'Sent reset password request successfully'\n      }else if(res.status===404){\n        document.getElementById('login_failure_reason').innerText = res.data['error']\n      }\n    })\n  }\n\n  componentWillUnmount() {\n    //clear all inputs\n    this.setState({email: ''});\n  }\n\n  render() {\n    return (\n      <div className=\"content_container container\">\n        <div className=\"login_form\">\n          <h1 className=\"login_form_header\">Password Reset</h1>\n          <p className=\"instruction\">Enter your e-mail address below, and we'll send you an email allowing you to reset your password.</p>\n          <form id='enter_email_form' onSubmit={this.onSubmit}>\n            <div className=\"form-group\">\n              <input\n                type=\"email\"\n                className=\"form-control\"\n                name=\"email\"\n                value={this.state.email}\n                placeholder=\"Your email address\"\n                onChange={this.onChange}\n              />\n              <span id='email_validate_warning'></span>\n            </div>\n            <div className=\"form-group\">\n              <button type=\"submit\">Reset my password</button>\n            </div>\n            <div className=\"form-group\">\n              <span id=\"login_failure_reason\"></span>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ForgetPassword\n","import React, { Component } from 'react'\nimport { updatePassword } from './UserFunctions'\n\nclass ResetPassword extends Component {\n  constructor() {\n    super()\n    this.state = {\n      password: '',\n      retype_password: '',\n    }\n    this.onChange = this.onChange.bind(this)\n    this.onSubmit = this.onSubmit.bind(this)\n  }\n\n  onChange(e) {\n    let name = e.target.name\n    this.setState({ [name]: e.target.value }, () => {\n      this.checkInputs(name);\n    });\n  }\n\n  checkInputs(name){\n    switch(name){\n      case 'password':\n        this.checkPassword()\n        break\n      case 'retype_password':\n        console.log('enter retype_password')\n        this.checkRetypePassword();\n        break\n      default:\n      }\n  }\n\n  checkPassword(){\n    if(this.state.password.length===0){\n      document.getElementById('password_validate_warning').innerText = 'Required'\n      return false\n    }else if(! /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,100}$/.test(this.state.password)){\n      document.getElementById('password_validate_warning').innerText = 'Must be 8 characters or more, needs at least one numeric digit, one uppercase and one lowercase letter'\n      return false\n    }else{\n      document.getElementById('password_validate_warning').innerText = ''\n      return true\n    }\n  }\n\n  checkRetypePassword(){\n    if(this.state.password !== this.state.retype_password){\n      document.getElementById('retype_password_validate_warning').innerText = 'The passwords you entered do not match.'\n      return false\n    }else{\n      document.getElementById('retype_password_validate_warning').innerText = ''\n      return true\n    }\n  }\n\n  onSubmit(e) {\n    e.preventDefault()\n\n    // Checks if all inputs are correct\n    if(!this.checkPassword() || !this.checkRetypePassword()) return\n\n    // Sends reset password request\n    var urlParams = new URLSearchParams(window.location.search);\n    if (!urlParams.has('token')) return\n\n    const updatePasswordReq = {\n      token: urlParams.get('token'),\n      password: this.state.password\n    }\n\n    console.log(updatePasswordReq)\n\n    updatePassword(updatePasswordReq).then( res => {\n      if(res.status===200){\n        alert('Updated your password successfully. Will redirect to login page. Please login with your new password')\n        this.props.history.push(`/login`)\n      }else{\n        document.getElementById('update_password_warning').innerText = res.data.error\n      }\n    })\n\n  }\n\n  componentWillUnmount() {\n    //clear all inputs\n    this.setState({password: '',\n                   retype_password: ''});\n  }\n\n  render() {\n    return (\n      <div className=\"login_form\">\n        <h1 className=\"login_form_header\">Password Reset</h1>\n        <form id='enter_email_form' onSubmit={this.onSubmit}>\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Password</label>\n            <input\n              type=\"password\"\n              className=\"form-control\"\n              name=\"password\"\n              placeholder=\"Password\"\n              value={this.state.password}\n              onChange={this.onChange}\n            />\n            <span id='password_validate_warning'></span>\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Confirm password</label>\n            <input\n              type=\"password\"\n              className=\"form-control\"\n              name=\"retype_password\"\n              placeholder=\"Retype password\"\n              value={this.state.retype_password}\n              onChange={this.onChange}\n            />\n            <span id='retype_password_validate_warning'></span>\n          </div>\n          <div className=\"form-group\">\n            <button type=\"submit\">Register!</button>\n            <span id='update_password_warning'></span>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport default ResetPassword\n","import React, { Component } from 'react';\nimport './App.css';\nimport { BrowserRouter as Router, Route } from 'react-router-dom'\n\nimport Navbar from './components/Navbar'\nimport Landing from './components/Landing'\nimport Login from './components/Login'\nimport Register from './components/Register'\nimport Profile from './components/Profile'\nimport Channels from './components/Channels'\nimport Channel from './components/Channel'\nimport ForgetPassword from './components/ForgetPassword'\nimport ResetPassword from './components/ResetPassword'\n\n\nclass App extends Component  {\n  render() {\n    return (\n      <Router>\n        <div className=\"App\">\n          <Navbar />\n          <div className=\"content_container\">\n            <Route exact path=\"/\" component={Landing} />\n            <Route exact path=\"/profile\" component={Profile} />\n            <Route exact path=\"/register\" component={Register} />\n            <Route exact path=\"/login\" component={Login} />\n            <Route exact path=\"/channels\" component={Channels} />\n            <Route exact path=\"/channel/:id\" component={Channel} />\n            <Route exact path=\"/forget_password\" component={ForgetPassword} />\n            <Route exact path=\"/reset_password\" component={ResetPassword} />\n          </div>\n        </div>\n      </Router>\n    );\n  }\n\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}